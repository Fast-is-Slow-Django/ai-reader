# è·¯ç”±è§„åˆ’å’Œæƒé™é…ç½®

AI-Reader é¡¹ç›®çš„å®Œæ•´è·¯ç”±è§„åˆ’å’Œæƒé™é…ç½®ã€‚

## ğŸ—ºï¸ è·¯ç”±ç»“æ„

### **å…¬å¼€è·¯ç”±ï¼ˆæ— éœ€ç™»å½•ï¼‰**

| è·¯ç”± | æè¿° | é¡µé¢æ–‡ä»¶ |
|------|------|---------|
| `/` | é¦–é¡µ/è½åœ°é¡µ | `app/page.tsx` |
| `/login` | ç™»å½•é¡µé¢ | `app/login/page.tsx` |
| `/signup` | æ³¨å†Œé¡µé¢ | `app/signup/page.tsx` |
| `/about` | å…³äºé¡µé¢ | `app/about/page.tsx` |

---

### **å—ä¿æŠ¤è·¯ç”±ï¼ˆéœ€è¦ç™»å½•ï¼‰**

| è·¯ç”± | æè¿° | é¡µé¢æ–‡ä»¶ | ä¿æŠ¤çº§åˆ« |
|------|------|---------|---------|
| `/dashboard` | ä¹¦æ¶ï¼ˆä¹¦ç±åˆ—è¡¨ï¼‰ | `app/dashboard/page.tsx` | ğŸ”’ éœ€è¦ç™»å½• |
| `/dashboard/upload` | ä¸Šä¼ ä¹¦ç± | `app/dashboard/upload/page.tsx` | ğŸ”’ éœ€è¦ç™»å½• |
| `/read/[bookId]` | é˜…è¯»å™¨é¡µé¢ | `app/read/[bookId]/page.tsx` | ğŸ”’ éœ€è¦ç™»å½• |
| `/settings` | ç”¨æˆ·è®¾ç½® | `app/settings/page.tsx` | ğŸ”’ éœ€è¦ç™»å½• |
| `/profile` | ä¸ªäººèµ„æ–™ | `app/profile/page.tsx` | ğŸ”’ éœ€è¦ç™»å½• |

---

## ğŸ” æƒé™çŸ©é˜µ

### **æœªç™»å½•ç”¨æˆ·**

```
âœ… å¯ä»¥è®¿é—®ï¼š
   - / (é¦–é¡µ)
   - /login (ç™»å½•)
   - /signup (æ³¨å†Œ)
   - /about (å…³äº)

âŒ ä¸èƒ½è®¿é—®ï¼š
   - /dashboard (è‡ªåŠ¨é‡å®šå‘åˆ° /login?redirectTo=/dashboard)
   - /read/* (è‡ªåŠ¨é‡å®šå‘åˆ° /login?redirectTo=/read/...)
   - /settings (è‡ªåŠ¨é‡å®šå‘åˆ° /login?redirectTo=/settings)
   - /profile (è‡ªåŠ¨é‡å®šå‘åˆ° /login?redirectTo=/profile)
```

### **å·²ç™»å½•ç”¨æˆ·**

```
âœ… å¯ä»¥è®¿é—®ï¼š
   - / (é¦–é¡µ)
   - /about (å…³äº)
   - /dashboard (ä¹¦æ¶)
   - /dashboard/upload (ä¸Šä¼ )
   - /read/* (é˜…è¯»å™¨)
   - /settings (è®¾ç½®)
   - /profile (ä¸ªäººèµ„æ–™)

ğŸ”„ è®¿é—® /login æˆ– /signup ä¼šè‡ªåŠ¨é‡å®šå‘åˆ° /dashboard
```

---

## ğŸ“‹ ä¸­é—´ä»¶é…ç½®

### **å½“å‰é…ç½®ï¼ˆ`middleware.ts`ï¼‰**

```typescript
// å—ä¿æŠ¤è·¯ç”±
const protectedRoutes = ['/dashboard', '/read']

// è®¤è¯è·¯ç”±
const isAuthRoute = pathname.startsWith('/login') || pathname.startsWith('/signup')
```

### **å¦‚ä½•æ·»åŠ æ–°çš„å—ä¿æŠ¤è·¯ç”±**

ç¼–è¾‘ `middleware.ts`ï¼š

```typescript
const protectedRoutes = [
  '/dashboard',
  '/read',
  '/settings',    // æ–°å¢
  '/profile',     // æ–°å¢
]
```

---

## ğŸš€ è·¯ç”±è¡Œä¸ºç¤ºä¾‹

### **åœºæ™¯ 1ï¼šæœªç™»å½•è®¿é—®ä¹¦æ¶**

```
1. ç”¨æˆ·è®¿é—®ï¼šhttp://localhost:3000/dashboard
2. ä¸­é—´ä»¶æ£€æµ‹åˆ°æœªç™»å½•
3. é‡å®šå‘åˆ°ï¼šhttp://localhost:3000/login?redirectTo=/dashboard
4. ç”¨æˆ·ç™»å½•æˆåŠŸ
5. è‡ªåŠ¨è¿”å›ï¼šhttp://localhost:3000/dashboard
```

---

### **åœºæ™¯ 2ï¼šå·²ç™»å½•è®¿é—®ç™»å½•é¡µ**

```
1. ç”¨æˆ·å·²ç™»å½•
2. è®¿é—®ï¼šhttp://localhost:3000/login
3. ä¸­é—´ä»¶æ£€æµ‹åˆ°å·²ç™»å½•
4. è‡ªåŠ¨é‡å®šå‘åˆ°ï¼šhttp://localhost:3000/dashboard
```

---

### **åœºæ™¯ 3ï¼šç›´æ¥è®¿é—®é˜…è¯»å™¨**

```
1. ç”¨æˆ·æœªç™»å½•ï¼Œè®¿é—®ï¼šhttp://localhost:3000/read/abc123
2. é‡å®šå‘åˆ°ï¼šhttp://localhost:3000/login?redirectTo=/read/abc123
3. ç™»å½•æˆåŠŸå
4. è‡ªåŠ¨è·³è½¬åˆ°ï¼šhttp://localhost:3000/read/abc123
```

---

## ğŸ”„ é‡å®šå‘æµç¨‹

### **`redirectTo` å‚æ•°**

ç™»å½•é¡µé¢åº”è¯¥æ£€æŸ¥ `redirectTo` æŸ¥è¯¢å‚æ•°ï¼š

```typescript
// app/login/page.tsx
import { useSearchParams } from 'next/navigation'

export default function LoginPage() {
  const searchParams = useSearchParams()
  const redirectTo = searchParams.get('redirectTo') || '/dashboard'
  
  async function handleLogin() {
    // ç™»å½•é€»è¾‘...
    
    // ç™»å½•æˆåŠŸåé‡å®šå‘
    router.push(redirectTo)
  }
}
```

---

## ğŸ›£ï¸ API è·¯ç”±

### **è®¤è¯ API**

| ç«¯ç‚¹ | æ–¹æ³• | æè¿° | æƒé™ |
|------|------|------|------|
| `/api/auth/login` | POST | ç”¨æˆ·ç™»å½• | å…¬å¼€ |
| `/api/auth/signup` | POST | ç”¨æˆ·æ³¨å†Œ | å…¬å¼€ |
| `/api/auth/logout` | POST | ç”¨æˆ·ç™»å‡º | éœ€è¦ç™»å½• |
| `/api/auth/user` | GET | è·å–å½“å‰ç”¨æˆ· | éœ€è¦ç™»å½• |

### **ä¹¦ç± API**

| ç«¯ç‚¹ | æ–¹æ³• | æè¿° | æƒé™ |
|------|------|------|------|
| `/api/books` | GET | è·å–ç”¨æˆ·ä¹¦ç±åˆ—è¡¨ | éœ€è¦ç™»å½• |
| `/api/books` | POST | ä¸Šä¼ æ–°ä¹¦ç± | éœ€è¦ç™»å½• |
| `/api/books/[id]` | GET | è·å–ä¹¦ç±è¯¦æƒ… | éœ€è¦ç™»å½• |
| `/api/books/[id]` | DELETE | åˆ é™¤ä¹¦ç± | éœ€è¦ç™»å½• |

### **ç¬”è®° API**

| ç«¯ç‚¹ | æ–¹æ³• | æè¿° | æƒé™ |
|------|------|------|------|
| `/api/notes` | GET | è·å–ä¹¦ç±ç¬”è®° | éœ€è¦ç™»å½• |
| `/api/notes` | POST | åˆ›å»ºæ–°ç¬”è®° | éœ€è¦ç™»å½• |
| `/api/notes/[id]` | PUT | æ›´æ–°ç¬”è®° | éœ€è¦ç™»å½• |
| `/api/notes/[id]` | DELETE | åˆ é™¤ç¬”è®° | éœ€è¦ç™»å½• |

---

## ğŸ“± ç§»åŠ¨ç«¯é€‚é…

### **å“åº”å¼è·¯ç”±è€ƒè™‘**

æ‰€æœ‰è·¯ç”±éƒ½åº”è¯¥é€‚é…ç§»åŠ¨ç«¯ï¼š

```typescript
// ç§»åŠ¨ç«¯ä¼˜å…ˆçš„è·¯ç”±è®¾è®¡
- / (é¦–é¡µ) - ç§»åŠ¨ç«¯å±•ç¤ºç®€åŒ–ç‰ˆ
- /dashboard - å¡ç‰‡å¼å¸ƒå±€
- /read/[id] - å…¨å±é˜…è¯»å™¨
- /login - ç®€æ´çš„ç™»å½•è¡¨å•
```

---

## ğŸ¯ å¯¼èˆªèœå•

### **æœªç™»å½•çŠ¶æ€**

```
é¦–é¡µ | å…³äº | ç™»å½• | æ³¨å†Œ
```

### **å·²ç™»å½•çŠ¶æ€**

```
é¦–é¡µ | ä¹¦æ¶ | è®¾ç½® | é€€å‡º
```

---

## ğŸ” SEO é…ç½®

### **å…¬å¼€è·¯ç”±çš„ metadata**

```typescript
// app/page.tsx
export const metadata = {
  title: 'AI-Reader - æ™ºèƒ½ç”µå­ä¹¦é˜…è¯»å™¨',
  description: 'ä½¿ç”¨ AI æŠ€æœ¯å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£å’Œå­¦ä¹ ',
}
```

### **å—ä¿æŠ¤è·¯ç”±çš„ metadata**

```typescript
// app/dashboard/page.tsx
export const metadata = {
  title: 'æˆ‘çš„ä¹¦æ¶ - AI-Reader',
  robots: 'noindex, nofollow', // ç§æœ‰é¡µé¢ä¸ç´¢å¼•
}
```

---

## ğŸ“Š è·¯ç”±åˆ†æ

### **é¢„æœŸè®¿é—®é¢‘ç‡**

| è·¯ç”± | è®¿é—®é¢‘ç‡ | ä¼˜åŒ–å»ºè®® |
|------|---------|---------|
| `/` | é«˜ | é™æ€ç”Ÿæˆ(SSG) |
| `/dashboard` | é«˜ | æœåŠ¡ç«¯æ¸²æŸ“(SSR) + ISR |
| `/read/[id]` | å¾ˆé«˜ | å®¢æˆ·ç«¯ç¼“å­˜ |
| `/login` | ä¸­ | å®¢æˆ·ç«¯æ¸²æŸ“ |
| `/settings` | ä½ | æŒ‰éœ€åŠ è½½ |

---

## ğŸš§ æœªæ¥æ‰©å±•

### **è®¡åˆ’æ·»åŠ çš„è·¯ç”±**

- `/explore` - æ¢ç´¢/æ¨èä¹¦ç±ï¼ˆå…¬å¼€ï¼‰
- `/collections` - ä¹¦å•åŠŸèƒ½ï¼ˆéœ€è¦ç™»å½•ï¼‰
- `/share/[shareId]` - åˆ†äº«ç¬”è®°ï¼ˆå…¬å¼€ï¼Œä½†åªè¯»ï¼‰
- `/admin` - ç®¡ç†åå°ï¼ˆéœ€è¦ç®¡ç†å‘˜æƒé™ï¼‰

---

## âœ… æ£€æŸ¥æ¸…å•

åœ¨éƒ¨ç½²å‰ç¡®è®¤ï¼š

- [ ] æ‰€æœ‰æ•æ„Ÿè·¯ç”±éƒ½æ·»åŠ åˆ° `protectedRoutes`
- [ ] ä¸­é—´ä»¶ matcher é…ç½®æ­£ç¡®
- [ ] `redirectTo` å‚æ•°åœ¨ç™»å½•é¡µæ­£ç¡®å¤„ç†
- [ ] å·²ç™»å½•ç”¨æˆ·æ— æ³•è®¿é—®ç™»å½•é¡µ
- [ ] API è·¯ç”±æœ‰ç‹¬ç«‹çš„æƒé™éªŒè¯
- [ ] 404 é¡µé¢é…ç½®æ­£ç¡®
- [ ] é”™è¯¯é¡µé¢ï¼ˆ500ï¼‰é…ç½®æ­£ç¡®

---

**ä¸‹ä¸€æ­¥ï¼š** å¼€å§‹å®ç°ç™»å½•å’Œæ³¨å†Œé¡µé¢
